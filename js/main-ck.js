(function(e){var t=e(".map"),n=e(".main"),r=e(window),i,s=100,o=e(window).height(),u=e(window).width(),a=e("html,body"),f=e(".addInfos"),l=e(".banner"),c=e(".nav"),h=e(".mapItem"),p=e("body"),d=e(".kots").outerHeight(),v=e(".overlay"),m=e(".popup"),g=e(".popup.lang"),y=e(".popup.advSearch"),b=e(".closePopup"),w=e(".toSocialLogin"),E=e(".toEmailLogin"),S=e(".loginEmail"),x=e(".loginSocial"),T=e(".toPopup");e(function(){t&&B();T.on("click",k);e(document).keyup(function(e){e.keyCode==27&&L(e)});b.on("click",L);v.on("click",function(e){A(e)});h.find(".head").on("click","a",_);e(".lang").on("click","a",M);c.find(".connection").on("click","a",k);w.on("click",N);E.on("click",C);e("#form-range").ionRangeSlider({min:0,max:1e4,type:"single",postfix:" mÃ¨tres",prettify:!0,disable:!1,onChange:function(t){e(".label-range").html("Distance ("+t.fromNumber+"m): ")}});e(window).resize(function(){B(e(window).height());H()});H();e(".goTo").on("click",function(t){t.preventDefault();F(e("#main"))})});var N=function(e){e.preventDefault();S.slideUp(function(){x.slideDown()})},C=function(e){e.preventDefault();x.slideUp(function(){S.slideDown()})},k=function(t){t.preventDefault();t.stopPropagation();var n=e(this).attr("data-type");if(n==="lang"){v.css("display","block");g.fadeIn().focus()}else if(n==="advSearch"){v.css("display","block");y.fadeIn().focus()}},L=function(e){e.preventDefault();m.fadeOut("fast");O()},A=function(e){e.preventDefault();m.fadeOut("fast");O()},O=function(){v.css("display","none")},M=function(t){t.preventDefault();e(".otherLanguages").slideToggle()},_=function(t){t.preventDefault();var n=e(this).parent().parent(),r=e(this).parent().next();if(n.hasClass("active"))r.slideUp(function(){n.removeClass("active")});else{h.find(".stuff.active .content").slideUp(function(){e(this).parent().removeClass("active")});n.addClass("active");r.slideDown();h.find(".stuff").not(".active")}},D=function(){a.scrollTop()>f.height()+l.outerHeight()+i?l.css({position:"fixed",top:0,left:0,right:0}):l.css({position:"relative"})},P=function(){a.scrollTop()>30?f.slideUp():f.slideDown()},H=function(){e(".kot .content").ellipsis()},B=function(r){r?i=j(r,s)-e(".banner").height():i=j(o,s)-e(".banner").height();t.css({height:i});n.css({height:"auto","min-height":"100%"})},j=function(e,t){return e/100*t},F=function(t){e("html,body").animate({scrollTop:t.offset().top},"slow")}}).call(this,jQuery);(function(e){e.fn.drags=function(t){t=e.extend({handle:"",cursor:"move"},t);if(t.handle==="")var n=this;else var n=this.find(t.handle);return n.css("cursor",t.cursor).on("mousedown",function(n){if(t.handle==="")var r=e(this).addClass("draggable");else var r=e(this).addClass("active-handle").parent().addClass("draggable");var i=r.css("z-index"),s=r.outerHeight(),o=r.outerWidth(),u=r.offset().top+s-n.pageY,a=r.offset().left+o-n.pageX;r.css("z-index",1e3).parents().on("mousemove",function(t){e(".draggable").offset({top:t.pageY+u-s,left:t.pageX+a-o}).on("mouseup",function(){e(this).removeClass("draggable").css("z-index",i)})});n.preventDefault()}).on("mouseup",function(){t.handle===""?e(this).removeClass("draggable"):e(this).removeClass("active-handle").parent().removeClass("draggable")})}}).call(this,jQuery);