(function(e){var t=e(".map"),n=e(".main"),r=e(window),i,s=100,o=e(window).height(),u=e(window).width(),a=e("html,body"),f=e(".addInfos"),l=e(".banner"),c=e(".mapItem"),h=e("body"),p=e(".kots").outerHeight(),d=e(".overlay"),v=e(".popup"),m=e(".closePopup"),g=e(".toPopup");e(function(){t&&k();g.on("click",y);e(document).keyup(function(e){e.keyCode==27&&b(e)});m.on("click",b);d.on("click",function(e){w(e)});c.find(".head").on("click","a",x);e(".lang").on("click","a",S);e(".connection,.register").css({});e("#form-range").ionRangeSlider({min:0,max:1e4,type:"single",postfix:" mÃ¨tres",prettify:!0,disable:!1,onChange:function(t){e(".label-range").html("Distance ("+t.fromNumber+"m): ")}});e(window).resize(function(){k(e(window).height());C()});C();e(".goTo").on("click",function(t){t.preventDefault();A(e("#main"))})});var y=function(e){e.preventDefault();e.stopPropagation();d.css("display","block");v.fadeIn().focus();v.drags()},b=function(e){e.preventDefault();v.fadeOut("fast");E()},w=function(e){e.preventDefault();v.fadeOut("fast");E()},E=function(){d.css("display","none")},S=function(t){t.preventDefault();e(".otherLanguages").slideToggle()},x=function(t){t.preventDefault();var n=e(this).parent().parent(),r=e(this).parent().next();if(n.hasClass("active"))r.slideUp(function(){n.removeClass("active")});else{c.find(".stuff.active .content").slideUp(function(){e(this).parent().removeClass("active")});n.addClass("active");r.slideDown();c.find(".stuff").not(".active")}},T=function(){a.scrollTop()>f.height()+l.outerHeight()+i?l.css({position:"fixed",top:0,left:0,right:0}):l.css({position:"relative"})},N=function(){a.scrollTop()>30?f.slideUp():f.slideDown()},C=function(){e(".kot .content").ellipsis()},k=function(r){r?i=L(r,s)-e(".banner").height():i=L(o,s)-e(".banner").height();t.css({height:i});n.css({height:"auto","min-height":"100%"})},L=function(e,t){return e/100*t},A=function(t){e("html,body").animate({scrollTop:t.offset().top},"slow")}}).call(this,jQuery);(function(e){e.fn.drags=function(t){t=e.extend({handle:"",cursor:"move"},t);if(t.handle==="")var n=this;else var n=this.find(t.handle);return n.css("cursor",t.cursor).on("mousedown",function(n){if(t.handle==="")var r=e(this).addClass("draggable");else var r=e(this).addClass("active-handle").parent().addClass("draggable");var i=r.css("z-index"),s=r.outerHeight(),o=r.outerWidth(),u=r.offset().top+s-n.pageY,a=r.offset().left+o-n.pageX;r.css("z-index",1e3).parents().on("mousemove",function(t){e(".draggable").offset({top:t.pageY+u-s,left:t.pageX+a-o}).on("mouseup",function(){e(this).removeClass("draggable").css("z-index",i)})});n.preventDefault()}).on("mouseup",function(){t.handle===""?e(this).removeClass("draggable"):e(this).removeClass("active-handle").parent().removeClass("draggable")})}}).call(this,jQuery);